<section class="max-w-7xl mx-auto px-6 pt-4 md:pt-6 pb-10 md:pb-14">
  <%# ───────────────── Back link ───────────────── %>
  <% if @back_link_path.present? %>
    <div class="mb-3">
      <%= link_to @back_link_path,
        class: "inline-flex items-center gap-2 text-gray hover:text-black transition-colors text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ruby/30 rounded px-1" do %>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        <span><%= @back_link_text %></span>
      <% end %>
    </div>
  <% end %>

  <%# ───────────────── Header ───────────────── %>
  <div class="mb-8 pb-6 border-b border-gray-light">
    <h1 class="relative text-3xl sm:text-4xl md:text-5xl font-black leading-tight tracking-tight text-black">
      <%= @post.title %>
      <span class="absolute left-0 -bottom-3 h-1.5 w-12 bg-ruby rounded-full"></span>
    </h1>

    <% if @post.description.present? %>
      <p class="mt-5 text-lg md:text-xl text-gray max-w-3xl">
        <%= @post.description %>
      </p>
    <% end %>

    <div class="mt-4 flex flex-wrap items-center gap-x-4 gap-y-2 text-sm text-gray">
      <time datetime="<%= @post.created_at.iso8601 %>"><%= @post.created_at.to_date.strftime("%B %-d, %Y") %></time>
      <span aria-hidden="true">•</span>
      <span class="inline-flex items-center gap-1">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
        <%= pluralize((@post.body.to_s.split.length / 200.0).ceil, "min") %> read
      </span>
    </div>
  </div>

  <%# ───────────────── Content ───────────────── %>
  <div>
    <div class="markdown-content max-w-5xl">
      <%== marksmithed @post.body %>
    </div>
  </div>

  <%# ───────────────── Footer ───────────────── %>
  <div class="max-w-5xl mt-12 pt-8 border-t border-gray-light">
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
      <%= link_to @back_link_path,
        class: "inline-flex items-center gap-2 px-4 py-2 border border-gray-light hover:border-black rounded-lg transition-colors text-sm font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ruby/30" do %>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        Back to <%= @page_title || "Posts" %>
      <% end %>

      <div class="text-sm text-gray">
        Last updated <%= @post.updated_at.strftime("%B %-d, %Y") %>
      </div>
    </div>
  </div>
</section>
