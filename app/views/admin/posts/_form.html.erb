<%= form_with model: [:admin, @post], local: true do |f| %>
  <% if @post.errors.any? %>
    <div class="bg-red-100 border border-red-400 text-red-700 p-4 mb-4 rounded">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from saving:</h2>
      <ul class="list-disc ml-5 mt-2">
        <% @post.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-4">
    <%= f.label :title, class: "block font-medium mb-1" %>
    <%= f.text_field :title, class: "w-full border border-gray-light rounded p-3 focus:border-ruby focus:outline-none" %>
  </div>

  <div class="mb-4">
    <%= f.label :description, class: "block font-medium mb-1" %>
    <%= f.text_area :description,
                    rows: 3,
                    class: "w-full border border-gray-light rounded p-3 focus:border-ruby focus:outline-none",
                    placeholder: "Brief description for cards and previews (max 500 characters)" %>
    <p class="text-sm text-gray mt-1">This will appear on content cards and previews</p>
  </div>

  <div class="mb-4">
    <%= f.label :post_type, "Content Type", class: "block font-medium mb-1" %>
    <%= f.select :post_type, 
                 options_for_select([
                   ['Learn Ruby', 'learn_ruby'],
                   ['Software Dev', 'software_dev'],
                   ['Blog', 'blog']
                 ], @post.post_type),
                 { prompt: 'Select content type...' },
                 { class: "w-full border border-gray-light rounded p-3 focus:border-ruby focus:outline-none" } %>
  </div>

  <div class="mb-4">
    <%= f.label :slug, class: "block font-medium mb-1" %>
    <%= f.text_field :slug, 
                     class: "w-full border border-gray-light rounded p-3 focus:border-ruby focus:outline-none",
                     placeholder: "Leave blank to auto-generate from title" %>
  </div>

  <div class="mb-4">
    <%= f.label :body, class: "block font-medium mb-1" %>
    <%= f.marksmith :body,
                    rows: 12,
                    class: "w-full border border-gray-light rounded p-3 focus:border-ruby focus:outline-none",
                    placeholder: "Write your content in Markdownâ€¦" %>
  </div>

  <div class="flex items-center mb-6 space-x-6">
    <label class="inline-flex items-center cursor-pointer">
      <%= f.check_box :published, class: "text-ruby focus:ring-ruby" %>
      <span class="ml-2 font-medium">Published</span>
    </label>
    <label class="inline-flex items-center cursor-pointer">
      <%= f.check_box :featured, class: "text-ruby focus:ring-ruby" %>
      <span class="ml-2 font-medium">Featured</span>
    </label>
  </div>

  <div class="flex items-center gap-3">
    <%= f.submit class: "px-6 py-3 bg-ruby text-white rounded hover:bg-ruby/90 font-medium" %>
    <%= link_to "Cancel", 
                @post.persisted? ? admin_post_path(@post) : admin_posts_path,
                class: "px-6 py-3 bg-gray-light text-black rounded hover:bg-gray font-medium" %>
  </div>
<% end %>
